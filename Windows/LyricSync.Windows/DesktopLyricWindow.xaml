<Window x:Class="LyricSync.Windows.DesktopLyricWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="桌面歌词" Height="220" Width="720"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize"
        ShowInTaskbar="False"
        Topmost="True">
    <Grid>
        <Border Background="#66000000" CornerRadius="12" Padding="16" MouseLeftButtonDown="Border_MouseLeftButtonDown">
            <Border.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="锁定窗口" IsCheckable="True" IsChecked="{Binding IsLocked, Mode=TwoWay}"/>
                    <MenuItem Header="显示翻译" IsCheckable="True" IsChecked="{Binding ShowTranslation, Mode=TwoWay}"/>
                    <Separator/>
                    <MenuItem Header="设置..." Click="Settings_Click"/>
                    <Separator/>
                    <MenuItem Header="关闭" Click="Close_Click"/>
                </ContextMenu>
            </Border.ContextMenu>
            <StackPanel>
                <!-- 主歌词 -->
                <TextBlock Text="{Binding CurrentLine.Text}"
                           FontSize="28"
                           Foreground="White"
                           TextAlignment="Center"
                           TextWrapping="Wrap">
                    <TextBlock.Effect>
                        <DropShadowEffect Color="#AA000000" BlurRadius="8" ShadowDepth="0"/>
                    </TextBlock.Effect>
                </TextBlock>
                <!-- 翻译歌词 -->
                <TextBlock Text="{Binding CurrentLine.Translation}"
                           Margin="0,6,0,0"
                           FontSize="20"
                           Foreground="#CCDDDDDD"
                           TextAlignment="Center"
                           TextWrapping="Wrap">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding ShowTranslation}" Value="True"/>
                                        <Condition Binding="{Binding CurrentLine.HasTranslation}" Value="True"/>
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Visibility" Value="Visible"/>
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                    <TextBlock.Effect>
                        <DropShadowEffect Color="#AA000000" BlurRadius="6" ShadowDepth="0"/>
                    </TextBlock.Effect>
                </TextBlock>
            </StackPanel>
        </Border>
    </Grid>
</Window>

